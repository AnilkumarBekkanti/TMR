<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeaveEase | Leave Management System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #4895ef;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --info: #43aa8b;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --white: #ffffff;
            --sidebar-width: 280px;
            --header-height: 70px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background-color: #f5f7fb;
            color: var(--dark);
            overflow-x: hidden;
        }

        @font-face {
            font-family: 'Poppins';
            src: url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-light);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        /* Layout */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--white);
            height: 100vh;
            position: fixed;
            transition: var(--transition);
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .sidebar-header {
            padding: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-header h2 {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }

        .sidebar-header .logo-icon {
            font-size: 1.8rem;
            color: var(--white);
        }

        .sidebar-menu {
            padding: 1rem 0;
            height: calc(100vh - var(--header-height));
            overflow-y: auto;
        }

        .menu-item {
            padding: 0.8rem 1.5rem;
            margin: 0.2rem 0;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            color: rgba(255, 255, 255, 0.8);
        }

        .menu-item:hover, .menu-item.active {
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
        }

        .menu-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: var(--white);
            border-radius: 0 4px 4px 0;
        }

        .menu-item i {
            font-size: 1.1rem;
            width: 24px;
            text-align: center;
        }

        .menu-item .menu-text {
            font-weight: 500;
        }

        .menu-item .badge {
            margin-left: auto;
            background: rgba(255, 255, 255, 0.2);
            color: var(--white);
            padding: 0.2rem 0.5rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            transition: var(--transition);
        }

        /* Header */
        .header {
            height: var(--header-height);
            background: var(--white);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 90;
        }

        .header-left h1 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .notification-icon, .messages-icon {
            position: relative;
            color: var(--gray);
            cursor: pointer;
            font-size: 1.2rem;
            transition: var(--transition);
        }

        .notification-icon:hover, .messages-icon:hover {
            color: var(--primary);
        }

        .notification-badge, .message-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: var(--white);
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.6rem;
            font-weight: bold;
        }

        .message-badge {
            background: var(--success);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1rem;
        }

        .user-name {
            font-weight: 500;
        }

        .user-role {
            font-size: 0.8rem;
            color: var(--gray);
        }

        /* Content Area */
        .content-wrapper {
            padding: 2rem;
        }

        /* Dashboard Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--white);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
        }

        .stat-card.primary::before {
            background: var(--primary);
        }

        .stat-card.success::before {
            background: var(--success);
        }

        .stat-card.warning::before {
            background: var(--warning);
        }

        .stat-card.danger::before {
            background: var(--danger);
        }

        .stat-card.info::before {
            background: var(--info);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .stat-card.primary .stat-icon {
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }

        .stat-card.success .stat-icon {
            background: rgba(76, 201, 240, 0.1);
            color: var(--success);
        }

        .stat-card.warning .stat-icon {
            background: rgba(248, 150, 30, 0.1);
            color: var(--warning);
        }

        .stat-card.danger .stat-icon {
            background: rgba(247, 37, 133, 0.1);
            color: var(--danger);
        }

        .stat-card.info .stat-icon {
            background: rgba(67, 170, 139, 0.1);
            color: var(--info);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .stat-change {
            display: flex;
            align-items: center;
            margin-top: 0.5rem;
            font-size: 0.8rem;
        }

        .stat-change.up {
            color: #28a745;
        }

        .stat-change.down {
            color: #dc3545;
        }

        /* Cards */
        .card {
            background: var(--white);
            border-radius: 12px;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .card-header {
            padding: 1.2rem 1.5rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-weight: 600;
            font-size: 1.2rem;
        }

        .card-actions {
            display: flex;
            gap: 0.5rem;
        }

        .card-body {
            padding: 1.5rem;
        }

        /* Tables */
        .table-responsive {
            overflow-x: auto;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th, .table td {
            padding: 1rem 1.2rem;
            text-align: left;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .table th {
            font-weight: 600;
            color: var(--gray);
            background: rgba(0, 0, 0, 0.01);
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 0.5px;
        }

        .table tr:hover {
            background: rgba(0, 0, 0, 0.01);
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.35rem 0.65rem;
            font-size: 0.75rem;
            font-weight: 600;
            line-height: 1;
            text-align: center;
            white-space: nowrap;
            vertical-align: baseline;
            border-radius: 50px;
        }

        .badge-primary {
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }

        .badge-success {
            background: rgba(76, 201, 240, 0.1);
            color: var(--success);
        }

        .badge-warning {
            background: rgba(248, 150, 30, 0.1);
            color: var(--warning);
        }

        .badge-danger {
            background: rgba(247, 37, 133, 0.1);
            color: var(--danger);
        }

        .badge-info {
            background: rgba(67, 170, 139, 0.1);
            color: var(--info);
        }

        .badge-light {
            background: rgba(248, 249, 250, 0.1);
            color: var(--gray);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            font-weight: 500;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            gap: 0.5rem;
        }

        .btn-sm {
            padding: 0.4rem 0.8rem;
            font-size: 0.8rem;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--secondary);
        }

        .btn-outline-primary {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .btn-outline-primary:hover {
            background: var(--primary);
            color: var(--white);
        }

        .btn-success {
            background: var(--success);
            color: var(--white);
        }

        .btn-success:hover {
            background: #3aa8d5;
        }

        .btn-danger {
            background: var(--danger);
            color: var(--white);
        }

        .btn-danger:hover {
            background: #e31273;
        }

        .btn-warning {
            background: var(--warning);
            color: var(--white);
        }

        .btn-warning:hover {
            background: #e68a19;
        }

        .btn-light {
            background: var(--light);
            color: var(--dark);
        }

        .btn-light:hover {
            background: #e2e6ea;
        }

        /* Forms */
        .form-group {
            margin-bottom: 1.2rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .form-control {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 16px 12px;
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .modal.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-dialog {
            width: 90%;
            max-width: 600px;
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            transform: translateY(-50px);
            transition: var(--transition);
        }

        .modal.show .modal-dialog {
            transform: translateY(0);
        }

        .modal-header {
            padding: 1.2rem 1.5rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-title {
            font-weight: 600;
            font-size: 1.2rem;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--danger);
        }

        .modal-body {
            padding: 1.5rem;
            max-height: 70vh;
            overflow-y: auto;
        }

        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
        }

        /* Tabs */
        .nav-tabs {
            display: flex;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }

        .nav-tab {
            padding: 0.8rem 1.2rem;
            cursor: pointer;
            font-weight: 500;
            color: var(--gray);
            border-bottom: 2px solid transparent;
            transition: var(--transition);
        }

        .nav-tab:hover {
            color: var(--primary);
        }

        .nav-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.show {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .menu-toggle {
                display: block;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 0 1rem;
            }

            .content-wrapper {
                padding: 1.5rem 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 576px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .modal-dialog {
                width: 95%;
            }
        }

        /* Utility Classes */
        .d-flex {
            display: flex;
        }

        .align-items-center {
            align-items: center;
        }

        .justify-content-between {
            justify-content: space-between;
        }

        .gap-2 {
            gap: 0.5rem;
        }

        .gap-3 {
            gap: 1rem;
        }

        .mb-3 {
            margin-bottom: 1rem;
        }

        .mb-4 {
            margin-bottom: 1.5rem;
        }

        .mt-3 {
            margin-top: 1rem;
        }

        .text-center {
            text-align: center;
        }

        .text-muted {
            color: var(--gray);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        /* Custom Scrollbar for dropdowns */
        .custom-scrollbar {
            scrollbar-width: thin;
            scrollbar-color: var(--primary-light) #f1f1f1;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: var(--primary-light);
            border-radius: 6px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-calendar-alt logo-icon"></i> LeaveEase</h2>
            </div>
            <div class="sidebar-menu">
                <div class="menu-item active" onclick="showDashboard()">
                    <i class="fas fa-tachometer-alt"></i>
                    <span class="menu-text">Dashboard</span>
                </div>
                <div class="menu-item" onclick="showApplyLeave()">
                    <i class="fas fa-plus-circle"></i>
                    <span class="menu-text">Apply Leave</span>
                    <span class="badge">New</span>
                </div>
                <div class="menu-item" onclick="showLeaveHistory()">
                    <i class="fas fa-history"></i>
                    <span class="menu-text">Leave History</span>
                </div>
                <div class="menu-item" onclick="showTeamLeaves()">
                    <i class="fas fa-users"></i>
                    <span class="menu-text">Team Leaves</span>
                    <span class="badge">3</span>
                </div>
                <div class="menu-item" onclick="showCalendar()">
                    <i class="fas fa-calendar"></i>
                    <span class="menu-text">Calendar</span>
                </div>
                <div class="menu-item" onclick="showReports()">
                    <i class="fas fa-chart-bar"></i>
                    <span class="menu-text">Reports</span>
                </div>
                <div class="menu-item" onclick="showSettings()">
                    <i class="fas fa-cog"></i>
                    <span class="menu-text">Settings</span>
                </div>
                <div class="menu-item" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span class="menu-text">Logout</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <div class="header-left">
                    <h1>Dashboard</h1>
                </div>
                <div class="header-right">
                    <div class="notification-icon">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </div>
                    <div class="messages-icon">
                        <i class="fas fa-envelope"></i>
                        <span class="message-badge">1</span>
                    </div>
                    <div class="user-profile">
                        <div class="user-avatar">JD</div>
                        <div>
                            <div class="user-name">John Doe</div>
                            <div class="user-role">Manager</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content Wrapper -->
            <div class="content-wrapper">
                <!-- Dashboard View -->
                <div id="dashboard-view">
                    <!-- Stats Cards -->
                    <div class="stats-grid">
                        <div class="stat-card primary">
                            <div class="stat-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="stat-value">18</div>
                            <div class="stat-label">Available Days</div>
                            <div class="stat-change up">
                                <i class="fas fa-arrow-up"></i> 2 from last month
                            </div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-value">3</div>
                            <div class="stat-label">Pending Requests</div>
                            <div class="stat-change down">
                                <i class="fas fa-arrow-down"></i> 1 from last week
                            </div>
                        </div>
                        <div class="stat-card success">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-value">12</div>
                            <div class="stat-label">Approved Leaves</div>
                            <div class="stat-change up">
                                <i class="fas fa-arrow-up"></i> 3 from last month
                            </div>
                        </div>
                        <div class="stat-card danger">
                            <div class="stat-icon">
                                <i class="fas fa-times-circle"></i>
                            </div>
                            <div class="stat-value">2</div>
                            <div class="stat-label">Rejected Leaves</div>
                            <div class="stat-change">
                                <i class="fas fa-equals"></i> No change
                            </div>
                        </div>
                    </div>

                    <!-- Recent Leaves Card -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Recent Leave Applications</div>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-download"></i> Export
                                </button>
                                <button class="btn btn-sm btn-primary" onclick="showApplyLeave()">
                                    <i class="fas fa-plus"></i> New Application
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Leave Type</th>
                                            <th>From</th>
                                            <th>To</th>
                                            <th>Duration</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Annual Leave</td>
                                            <td>15 Jul 2023</td>
                                            <td>20 Jul 2023</td>
                                            <td>5 days</td>
                                            <td><span class="badge badge-success">Approved</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-light" onclick="viewLeaveDetails(1)">
                                                    <i class="fas fa-eye"></i> View
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Sick Leave</td>
                                            <td>05 Aug 2023</td>
                                            <td>07 Aug 2023</td>
                                            <td>2 days</td>
                                            <td><span class="badge badge-warning">Pending</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-light" onclick="viewLeaveDetails(2)">
                                                    <i class="fas fa-eye"></i> View
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Emergency Leave</td>
                                            <td>10 Jun 2023</td>
                                            <td>12 Jun 2023</td>
                                            <td>2 days</td>
                                            <td><span class="badge badge-danger">Rejected</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-light" onclick="viewLeaveDetails(3)">
                                                    <i class="fas fa-eye"></i> View
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Team Leaves Card -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Team Leave Status</div>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-filter"></i> Filter
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Employee</th>
                                            <th>Leave Type</th>
                                            <th>From</th>
                                            <th>To</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <div class="d-flex align-items-center gap-2">
                                                    <div class="user-avatar" style="width: 30px; height: 30px; font-size: 0.8rem;">JS</div>
                                                    <span>Jane Smith</span>
                                                </div>
                                            </td>
                                            <td>Annual Leave</td>
                                            <td>10 Jul 2023</td>
                                            <td>17 Jul 2023</td>
                                            <td><span class="badge badge-success">Approved</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-light" onclick="viewTeamLeaveDetails(101)">
                                                    <i class="fas fa-eye"></i> View
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="d-flex align-items-center gap-2">
                                                    <div class="user-avatar" style="width: 30px; height: 30px; font-size: 0.8rem;">MJ</div>
                                                    <span>Mike Johnson</span>
                                                </div>
                                            </td>
                                            <td>Sick Leave</td>
                                            <td>05 Jul 2023</td>
                                            <td>06 Jul 2023</td>
                                            <td><span class="badge badge-success">Approved</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-light" onclick="viewTeamLeaveDetails(102)">
                                                    <i class="fas fa-eye"></i> View
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="d-flex align-items-center gap-2">
                                                    <div class="user-avatar" style="width: 30px; height: 30px; font-size: 0.8rem;">SW</div>
                                                    <span>Sarah Williams</span>
                                                </div>
                                            </td>
                                            <td>Maternity Leave</td>
                                            <td>01 Aug 2023</td>
                                            <td>01 Nov 2023</td>
                                            <td><span class="badge badge-warning">Pending</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-light" onclick="viewTeamLeaveDetails(103)">
                                                    <i class="fas fa-eye"></i> View
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Apply Leave View -->
                <div id="apply-leave-view" style="display: none;">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Apply for Leave</div>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-light" onclick="showDashboard()">
                                    <i class="fas fa-arrow-left"></i> Back
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <form id="leave-form">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Leave Type</label>
                                            <select class="form-control form-select" id="leave-type" required>
                                                <option value="">Select Leave Type</option>
                                                <option value="annual">Annual Leave</option>
                                                <option value="sick">Sick Leave</option>
                                                <option value="maternity">Maternity Leave</option>
                                                <option value="paternity">Paternity Leave</option>
                                                <option value="unpaid">Unpaid Leave</option>
                                                <option value="other">Other</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Available Balance</label>
                                            <input type="text" class="form-control" value="18 days" disabled>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Start Date</label>
                                            <input type="date" class="form-control" id="start-date" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">End Date</label>
                                            <input type="date" class="form-control" id="end-date" required>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Reason</label>
                                    <textarea class="form-control" id="reason" rows="3" placeholder="Enter reason for leave" required></textarea>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Contact During Leave</label>
                                    <input type="text" class="form-control" id="contact" placeholder="Phone number or email where you can be reached">
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Attachment (if any)</label>
                                    <input type="file" class="form-control" id="attachment">
                                    <small class="text-muted">You can upload supporting documents (medical certificate, etc.)</small>
                                </div>

                                <div class="d-flex justify-content-end gap-2 mt-4">
                                    <button type="reset" class="btn btn-light">
                                        <i class="fas fa-redo"></i> Reset
                                    </button>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-paper-plane"></i> Submit Application
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Leave History View -->
                <div id="leave-history-view" style="display: none;">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Leave History</div>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-light" onclick="showDashboard()">
                                    <i class="fas fa-arrow-left"></i> Back
                                </button>
                                <button class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-download"></i> Export
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="nav-tabs">
                                <div class="nav-tab active" onclick="filterLeaveHistory('all')">All</div>
                                <div class="nav-tab" onclick="filterLeaveHistory('approved')">Approved</div>
                                <div class="nav-tab" onclick="filterLeaveHistory('pending')">Pending</div>
                                <div class="nav-tab" onclick="filterLeaveHistory('rejected')">Rejected</div>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Leave Type</th>
                                            <th>Dates</th>
                                            <th>Duration</th>
                                            <th>Applied On</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="leave-history-body">
                                        <!-- Leave history will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Team Leaves View -->
                <div id="team-leaves-view" style="display: none;">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Team Leaves</div>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-light" onclick="showDashboard()">
                                    <i class="fas fa-arrow-left"></i> Back
                                </button>
                                <button class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-filter"></i> Filter
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="nav-tabs">
                                <div class="nav-tab active" onclick="filterTeamLeaves('all')">All</div>
                                <div class="nav-tab" onclick="filterTeamLeaves('pending')">Pending Approval</div>
                                <div class="nav-tab" onclick="filterTeamLeaves('approved')">Approved</div>
                                <div class="nav-tab" onclick="filterTeamLeaves('rejected')">Rejected</div>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Employee</th>
                                            <th>Leave Type</th>
                                            <th>Dates</th>
                                            <th>Duration</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="team-leaves-body">
                                        <!-- Team leaves will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Calendar View -->
                <div id="calendar-view" style="display: none;">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Leave Calendar</div>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-light" onclick="showDashboard()">
                                    <i class="fas fa-arrow-left"></i> Back
                                </button>
                                <div class="btn-group">
                                    <button class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-calendar-day"></i> Day
                                    </button>
                                    <button class="btn btn-sm btn-outline-primary active">
                                        <i class="fas fa-calendar-week"></i> Week
                                    </button>
                                    <button class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-calendar-alt"></i> Month
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="calendar" style="height: 600px;">
                                <!-- Calendar will be rendered here -->
                                <div class="text-center py-5">
                                    <h3 class="text-muted">Calendar View</h3>
                                    <p class="text-muted">This would display a interactive calendar with leave events</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reports View -->
                <div id="reports-view" style="display: none;">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Leave Reports</div>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-light" onclick="showDashboard()">
                                    <i class="fas fa-arrow-left"></i> Back
                                </button>
                                <button class="btn btn-sm btn-primary">
                                    <i class="fas fa-download"></i> Export Report
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row mb-4">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="form-label">Report Type</label>
                                        <select class="form-control form-select">
                                            <option>Leave Balance</option>
                                            <option>Leave Utilization</option>
                                            <option>Department-wise</option>
                                            <option>Employee-wise</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="form-label">From Date</label>
                                        <input type="date" class="form-control">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="form-label">To Date</label>
                                        <input type="date" class="form-control">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="chart-container" style="height: 400px;">
                                <!-- Chart would be rendered here -->
                                <div class="text-center py-5">
                                    <h3 class="text-muted">Analytical Reports</h3>
                                    <p class="text-muted">This would display charts and graphs of leave data</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings View -->
                <div id="settings-view" style="display: none;">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Settings</div>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-light" onclick="showDashboard()">
                                    <i class="fas fa-arrow-left"></i> Back
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="card">
                                        <div class="card-body text-center">
                                            <div class="user-avatar mx-auto" style="width: 100px; height: 100px; font-size: 2rem;">JD</div>
                                            <h4 class="mt-3">John Doe</h4>
                                            <p class="text-muted">Manager</p>
                                            <button class="btn btn-sm btn-outline-primary mt-2">
                                                <i class="fas fa-camera"></i> Change Photo
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="card mt-3">
                                        <div class="card-header">
                                            <div class="card-title">Quick Links</div>
                                        </div>
                                        <div class="card-body">
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item d-flex align-items-center gap-2">
                                                    <i class="fas fa-bell text-primary"></i>
                                                    <span>Notification Settings</span>
                                                </li>
                                                <li class="list-group-item d-flex align-items-center gap-2">
                                                    <i class="fas fa-lock text-primary"></i>
                                                    <span>Privacy Settings</span>
                                                </li>
                                                <li class="list-group-item d-flex align-items-center gap-2">
                                                    <i class="fas fa-language text-primary"></i>
                                                    <span>Language Preferences</span>
                                                </li>
                                                <li class="list-group-item d-flex align-items-center gap-2">
                                                    <i class="fas fa-moon text-primary"></i>
                                                    <span>Dark Mode</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="card">
                                        <div class="card-header">
                                            <div class="card-title">Account Settings</div>
                                        </div>
                                        <div class="card-body">
                                            <form id="settings-form">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label class="form-label">First Name</label>
                                                            <input type="text" class="form-control" value="John">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label class="form-label">Last Name</label>
                                                            <input type="text" class="form-control" value="Doe">
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="form-group">
                                                    <label class="form-label">Email</label>
                                                    <input type="email" class="form-control" value="john.doe@example.com">
                                                </div>
                                                
                                                <div class="form-group">
                                                    <label class="form-label">Phone Number</label>
                                                    <input type="tel" class="form-control" value="+1 (555) 123-4567">
                                                </div>
                                                
                                                <div class="form-group">
                                                    <label class="form-label">Department</label>
                                                    <select class="form-control form-select">
                                                        <option>Human Resources</option>
                                                        <option>Engineering</option>
                                                        <option>Marketing</option>
                                                        <option>Finance</option>
                                                        <option>Operations</option>
                                                    </select>
                                                </div>
                                                
                                                <div class="form-group">
                                                    <label class="form-label">Position</label>
                                                    <input type="text" class="form-control" value="HR Manager">
                                                </div>
                                                
                                                <hr class="my-4">
                                                
                                                <h5 class="mb-3">Change Password</h5>
                                                
                                                <div class="form-group">
                                                    <label class="form-label">Current Password</label>
                                                    <input type="password" class="form-control" placeholder="Enter current password">
                                                </div>
                                                
                                                <div class="form-group">
                                                    <label class="form-label">New Password</label>
                                                    <input type="password" class="form-control" placeholder="Enter new password">
                                                </div>
                                                
                                                <div class="form-group">
                                                    <label class="form-label">Confirm New Password</label>
                                                    <input type="password" class="form-control" placeholder="Confirm new password">
                                                </div>
                                                
                                                <div class="d-flex justify-content-end mt-4">
                                                    <button type="submit" class="btn btn-primary">
                                                        <i class="fas fa-save"></i> Save Changes
                                                    </button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Leave Details Modal -->
    <div class="modal" id="leave-details-modal">
        <div class="modal-dialog">
            <div class="modal-header">
                <div class="modal-title">Leave Application Details</div>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="leave-details-content">
                <!-- Content will be populated by JavaScript -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-light" onclick="closeModal()">Close</button>
                <button class="btn btn-primary" id="approve-btn" style="display: none;">Approve</button>
                <button class="btn btn-danger" id="reject-btn" style="display: none;">Reject</button>
            </div>
        </div>
    </div>

    <script>
        // Sample data for the leave management system
        const leaveHistory = [
            {
                id: 1,
                type: "Annual Leave",
                startDate: "2023-07-15",
                endDate: "2023-07-20",
                duration: 5,
                status: "approved",
                reason: "Family vacation to Hawaii. Need time to relax and spend quality time with family.",
                contact: "john.doe@example.com, +1 (555) 123-4567",
                appliedOn: "2023-06-10",
                processedBy: "HR Manager",
                processedOn: "2023-06-12",
                attachment: "vacation-plan.pdf"
            },
            {
                id: 2,
                type: "Sick Leave",
                startDate: "2023-08-05",
                endDate: "2023-08-07",
                duration: 2,
                status: "pending",
                reason: "Doctor diagnosed with flu. Need rest and recovery time.",
                contact: "+1 (555) 123-4567",
                appliedOn: "2023-07-28",
                processedBy: "",
                processedOn: "",
                attachment: "medical-certificate.pdf"
            },
            {
                id: 3,
                type: "Emergency Leave",
                startDate: "2023-06-10",
                endDate: "2023-06-12",
                duration: 2,
                status: "rejected",
                reason: "Family emergency - need to take care of sick parent.",
                contact: "+1 (555) 123-4567",
                appliedOn: "2023-06-08",
                processedBy: "HR Manager",
                processedOn: "2023-06-09",
                rejectionReason: "Insufficient documentation provided for emergency leave",
                attachment: ""
            },
            {
                id: 4,
                type: "Paternity Leave",
                startDate: "2023-05-01",
                endDate: "2023-05-14",
                duration: 14,
                status: "approved",
                reason: "Birth of my child. Need time to support my wife and newborn.",
                contact: "john.doe@example.com",
                appliedOn: "2023-04-15",
                processedBy: "HR Manager",
                processedOn: "2023-04-17",
                attachment: "birth-certificate.pdf"
            },
            {
                id: 5,
                type: "Unpaid Leave",
                startDate: "2023-09-10",
                endDate: "2023-09-15",
                duration: 5,
                status: "pending",
                reason: "Personal development - attending a professional conference.",
                contact: "john.doe@example.com",
                appliedOn: "2023-08-20",
                processedBy: "",
                processedOn: "",
                attachment: "conference-invitation.pdf"
            }
        ];

        const teamLeaves = [
            {
                id: 101,
                employee: "Jane Smith",
                employeeId: "JS",
                type: "Annual Leave",
                startDate: "2023-07-10",
                endDate: "2023-07-17",
                duration: 7,
                status: "approved",
                reason: "Summer vacation with family",
                contact: "jane.smith@example.com",
                appliedOn: "2023-06-25",
                processedBy: "John Doe",
                processedOn: "2023-06-27"
            },
            {
                id: 102,
                employee: "Mike Johnson",
                employeeId: "MJ",
                type: "Sick Leave",
                startDate: "2023-07-05",
                endDate: "2023-07-06",
                duration: 1,
                status: "approved",
                reason: "Food poisoning, doctor recommended rest",
                contact: "+1 (555) 987-6543",
                appliedOn: "2023-07-04",
                processedBy: "John Doe",
                processedOn: "2023-07-05",
                attachment: "doctor-note.pdf"
            },
            {
                id: 103,
                employee: "Sarah Williams",
                employeeId: "SW",
                type: "Maternity Leave",
                startDate: "2023-08-01",
                endDate: "2023-11-01",
                duration: 90,
                status: "pending",
                reason: "Maternity leave as per company policy",
                contact: "sarah.williams@example.com",
                appliedOn: "2023-07-15",
                processedBy: "",
                processedOn: "",
                attachment: "pregnancy-confirmation.pdf"
            },
            {
                id: 104,
                employee: "Robert Brown",
                employeeId: "RB",
                type: "Other",
                startDate: "2023-07-20",
                endDate: "2023-07-21",
                duration: 1,
                status: "pending",
                reason: "Moving to new apartment, need day to handle logistics",
                contact: "+1 (555) 555-1234",
                appliedOn: "2023-07-18",
                processedBy: "",
                processedOn: ""
            },
            {
                id: 105,
                employee: "Emily Davis",
                employeeId: "ED",
                type: "Annual Leave",
                startDate: "2023-08-10",
                endDate: "2023-08-20",
                duration: 10,
                status: "approved",
                reason: "Traveling abroad for sister's wedding",
                contact: "emily.davis@example.com",
                appliedOn: "2023-07-01",
                processedBy: "John Doe",
                processedOn: "2023-07-03"
            }
        ];

        // DOM Elements
        const dashboardView = document.getElementById('dashboard-view');
        const applyLeaveView = document.getElementById('apply-leave-view');
        const leaveHistoryView = document.getElementById('leave-history-view');
        const teamLeavesView = document.getElementById('team-leaves-view');
        const calendarView = document.getElementById('calendar-view');
        const reportsView = document.getElementById('reports-view');
        const settingsView = document.getElementById('settings-view');
        const leaveHistoryBody = document.getElementById('leave-history-body');
        const teamLeavesBody = document.getElementById('team-leaves-body');
        const leaveDetailsModal = document.getElementById('leave-details-modal');
        const leaveDetailsContent = document.getElementById('leave-details-content');
        const approveBtn = document.getElementById('approve-btn');
        const rejectBtn = document.getElementById('reject-btn');
        const leaveForm = document.getElementById('leave-form');
        const settingsForm = document.getElementById('settings-form');

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            populateLeaveHistory();
            populateTeamLeaves();
            
            // Form submission handlers
            leaveForm.addEventListener('submit', function(e) {
                e.preventDefault();
                applyForLeave();
            });
            
            settingsForm.addEventListener('submit', function(e) {
                e.preventDefault();
                saveSettings();
            });
            
            // Show dashboard by default
            showDashboard();
        });

        // Navigation functions
        function showDashboard() {
            hideAllViews();
            dashboardView.style.display = 'block';
            updateActiveMenu(0);
            document.querySelector('.header-left h1').textContent = 'Dashboard';
        }

        function showApplyLeave() {
            hideAllViews();
            applyLeaveView.style.display = 'block';
            updateActiveMenu(1);
            document.querySelector('.header-left h1').textContent = 'Apply for Leave';
            
            // Set default dates
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('start-date').value = today;
            document.getElementById('end-date').value = today;
        }

        function showLeaveHistory() {
            hideAllViews();
            leaveHistoryView.style.display = 'block';
            updateActiveMenu(2);
            document.querySelector('.header-left h1').textContent = 'Leave History';
            filterLeaveHistory('all');
        }

        function showTeamLeaves() {
            hideAllViews();
            teamLeavesView.style.display = 'block';
            updateActiveMenu(3);
            document.querySelector('.header-left h1').textContent = 'Team Leaves';
            filterTeamLeaves('all');
        }

        function showCalendar() {
            hideAllViews();
            calendarView.style.display = 'block';
            updateActiveMenu(4);
            document.querySelector('.header-left h1').textContent = 'Leave Calendar';
        }

        function showReports() {
            hideAllViews();
            reportsView.style.display = 'block';
            updateActiveMenu(5);
            document.querySelector('.header-left h1').textContent = 'Reports';
        }

        function showSettings() {
            hideAllViews();
            settingsView.style.display = 'block';
            updateActiveMenu(6);
            document.querySelector('.header-left h1').textContent = 'Settings';
        }

        function hideAllViews() {
            dashboardView.style.display = 'none';
            applyLeaveView.style.display = 'none';
            leaveHistoryView.style.display = 'none';
            teamLeavesView.style.display = 'none';
            calendarView.style.display = 'none';
            reportsView.style.display = 'none';
            settingsView.style.display = 'none';
        }

        function updateActiveMenu(index) {
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach((item, i) => {
                if (i === index) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        }

        // Filter leave history
        function filterLeaveHistory(filter) {
            const tabs = document.querySelectorAll('#leave-history-view .nav-tab');
            tabs.forEach(tab => {
                if (tab.textContent.toLowerCase() === filter) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });

            let filteredLeaves = leaveHistory;
            if (filter !== 'all') {
                filteredLeaves = leaveHistory.filter(leave => leave.status === filter);
            }

            populateLeaveHistoryTable(filteredLeaves);
        }

        // Filter team leaves
        function filterTeamLeaves(filter) {
            const tabs = document.querySelectorAll('#team-leaves-view .nav-tab');
            tabs.forEach(tab => {
                if (tab.textContent.toLowerCase().includes(filter)) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });

            let filteredLeaves = teamLeaves;
            if (filter !== 'all') {
                filteredLeaves = teamLeaves.filter(leave => leave.status === filter);
            }

            populateTeamLeavesTable(filteredLeaves);
        }

        // Populate leave history table
        function populateLeaveHistory() {
            populateLeaveHistoryTable(leaveHistory);
        }

        function populateLeaveHistoryTable(leaves) {
            leaveHistoryBody.innerHTML = '';
            
            leaves.forEach(leave => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${leave.type}</td>
                    <td>${formatDate(leave.startDate)} - ${formatDate(leave.endDate)}</td>
                    <td>${leave.duration} day${leave.duration !== 1 ? 's' : ''}</td>
                    <td>${formatDate(leave.appliedOn)}</td>
                    <td><span class="badge ${getStatusBadgeClass(leave.status)}">${capitalizeFirstLetter(leave.status)}</span></td>
                    <td>
                        <button class="btn btn-sm btn-light" onclick="viewLeaveDetails(${leave.id})">
                            <i class="fas fa-eye"></i> View
                        </button>
                    </td>
                `;
                
                leaveHistoryBody.appendChild(row);
            });
        }

        // Populate team leaves table
        function populateTeamLeaves() {
            populateTeamLeavesTable(teamLeaves);
        }

        function populateTeamLeavesTable(leaves) {
            teamLeavesBody.innerHTML = '';
            
            leaves.forEach(leave => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>
                        <div class="d-flex align-items-center gap-2">
                            <div class="user-avatar" style="width: 30px; height: 30px; font-size: 0.8rem;">${leave.employeeId}</div>
                            <span>${leave.employee}</span>
                        </div>
                    </td>
                    <td>${leave.type}</td>
                    <td>${formatDate(leave.startDate)} - ${formatDate(leave.endDate)}</td>
                    <td>${leave.duration} day${leave.duration !== 1 ? 's' : ''}</td>
                    <td><span class="badge ${getStatusBadgeClass(leave.status)}">${capitalizeFirstLetter(leave.status)}</span></td>
                    <td>
                        <button class="btn btn-sm btn-light" onclick="viewTeamLeaveDetails(${leave.id})">
                            <i class="fas fa-eye"></i> View
                        </button>
                    </td>
                `;
                
                teamLeavesBody.appendChild(row);
            });
        }

        // Apply for leave
        function applyForLeave() {
            const leaveType = document.getElementById('leave-type').value;
            const startDate = document.getElementById('start-date').value;
            const endDate = document.getElementById('end-date').value;
            const reason = document.getElementById('reason').value;
            const contact = document.getElementById('contact').value;
            const attachment = document.getElementById('attachment').files[0];
            
            // Validate dates
            if (new Date(startDate) > new Date(endDate)) {
                alert('End date must be after start date');
                return;
            }
            
            // Calculate duration
            const start = new Date(startDate);
            const end = new Date(endDate);
            const duration = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;
            
            // Create new leave application
            const newLeave = {
                id: leaveHistory.length + 1,
                type: document.getElementById('leave-type').options[document.getElementById('leave-type').selectedIndex].text,
                startDate,
                endDate,
                duration,
                status: "pending",
                reason,
                contact,
                appliedOn: new Date().toISOString().split('T')[0],
                attachment: attachment ? attachment.name : ""
            };
            
            leaveHistory.unshift(newLeave);
            populateLeaveHistory();
            
            // Reset form
            leaveForm.reset();
            
            // Show success message
            alert('Your leave application has been submitted successfully!');
            
            // Return to dashboard
            showDashboard();
        }

        // Save settings
        function saveSettings() {
            // In a real application, this would save to the server
            alert('Settings saved successfully!');
        }

        // View leave details
        function viewLeaveDetails(id) {
            const leave = leaveHistory.find(l => l.id === id);
            
            if (leave) {
                let detailsHtml = `
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Leave Type</label>
                                <p>${leave.type}</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Status</label>
                                <p><span class="badge ${getStatusBadgeClass(leave.status)}">${capitalizeFirstLetter(leave.status)}</span></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Start Date</label>
                                <p>${formatDate(leave.startDate)}</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">End Date</label>
                                <p>${formatDate(leave.endDate)}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group mb-3">
                        <label class="form-label">Duration</label>
                        <p>${leave.duration} day${leave.duration !== 1 ? 's' : ''}</p>
                    </div>
                    
                    <div class="form-group mb-3">
                        <label class="form-label">Reason</label>
                        <p>${leave.reason}</p>
                    </div>
                    
                    <div class="form-group mb-3">
                        <label class="form-label">Contact During Leave</label>
                        <p>${leave.contact || 'Not provided'}</p>
                    </div>
                    
                    <div class="form-group mb-3">
                        <label class="form-label">Applied On</label>
                        <p>${formatDate(leave.appliedOn)}</p>
                    </div>
                `;
                
                if (leave.processedBy) {
                    detailsHtml += `
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">Processed By</label>
                                    <p>${leave.processedBy}</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">Processed On</label>
                                    <p>${formatDate(leave.processedOn)}</p>
                                </div>
                            </div>
                        </div>
                    `;
                }
                
                if (leave.rejectionReason) {
                    detailsHtml += `
                        <div class="form-group mb-3">
                            <label class="form-label">Rejection Reason</label>
                            <p>${leave.rejectionReason}</p>
                        </div>
                    `;
                }
                
                if (leave.attachment) {
                    detailsHtml += `
                        <div class="form-group mb-3">
                            <label class="form-label">Attachment</label>
                            <p>
                                <a href="#" class="text-primary">
                                    <i class="fas fa-paperclip"></i> ${leave.attachment}
                                </a>
                            </p>
                        </div>
                    `;
                }
                
                leaveDetailsContent.innerHTML = detailsHtml;
                
                // Hide action buttons for personal leave details
                approveBtn.style.display = 'none';
                rejectBtn.style.display = 'none';
                
                openModal();
            }
        }

        // View team leave details
        function viewTeamLeaveDetails(id) {
            const leave = teamLeaves.find(l => l.id === id);
            
            if (leave) {
                let detailsHtml = `
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Employee</label>
                                <p>
                                    <div class="d-flex align-items-center gap-2">
                                        <div class="user-avatar" style="width: 30px; height: 30px; font-size: 0.8rem;">${leave.employeeId}</div>
                                        <span>${leave.employee}</span>
                                    </div>
                                </p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Status</label>
                                <p><span class="badge ${getStatusBadgeClass(leave.status)}">${capitalizeFirstLetter(leave.status)}</span></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Leave Type</label>
                                <p>${leave.type}</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Duration</label>
                                <p>${leave.duration} day${leave.duration !== 1 ? 's' : ''}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Start Date</label>
                                <p>${formatDate(leave.startDate)}</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">End Date</label>
                                <p>${formatDate(leave.endDate)}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group mb-3">
                        <label class="form-label">Reason</label>
                        <p>${leave.reason}</p>
                    </div>
                    
                    <div class="form-group mb-3">
                        <label class="form-label">Contact During Leave</label>
                        <p>${leave.contact || 'Not provided'}</p>
                    </div>
                    
                    <div class="form-group mb-3">
                        <label class="form-label">Applied On</label>
                        <p>${formatDate(leave.appliedOn)}</p>
                    </div>
                `;
                
                if (leave.processedBy) {
                    detailsHtml += `
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">Processed By</label>
                                    <p>${leave.processedBy}</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">Processed On</label>
                                    <p>${formatDate(leave.processedOn)}</p>
                                </div>
                            </div>
                        </div>
                    `;
                }
                
                if (leave.attachment) {
                    detailsHtml += `
                        <div class="form-group mb-3">
                            <label class="form-label">Attachment</label>
                            <p>
                                <a href="#" class="text-primary">
                                    <i class="fas fa-paperclip"></i> ${leave.attachment}
                                </a>
                            </p>
                        </div>
                    `;
                }
                
                leaveDetailsContent.innerHTML = detailsHtml;
                
                // Show action buttons only for pending leaves
                if (leave.status === 'pending') {
                    approveBtn.style.display = 'inline-block';
                    rejectBtn.style.display = 'inline-block';
                    
                    // Set click handlers
                    approveBtn.onclick = function() { approveLeave(id); };
                    rejectBtn.onclick = function() { rejectLeave(id); };
                } else {
                    approveBtn.style.display = 'none';
                    rejectBtn.style.display = 'none';
                }
                
                openModal();
            }
        }

        // Approve leave (manager action)
        function approveLeave(id) {
            const leave = teamLeaves.find(l => l.id === id);
            if (leave) {
                leave.status = 'approved';
                leave.processedBy = 'John Doe';
                leave.processedOn = new Date().toISOString().split('T')[0];
                
                // Update the corresponding leave in leaveHistory if it's the manager's own leave
                const userLeave = leaveHistory.find(l => 
                    l.startDate === leave.startDate && 
                    l.endDate === leave.endDate &&
                    l.type === leave.type
                );
                
                if (userLeave) {
                    userLeave.status = 'approved';
                    userLeave.processedBy = 'John Doe';
                    userLeave.processedOn = new Date().toISOString().split('T')[0];
                }
                
                populateTeamLeaves();
                closeModal();
                showSuccessAlert('Leave approved successfully!');
            }
        }

        // Reject leave (manager action)
        function rejectLeave(id) {
            const reason = prompt('Please enter the reason for rejection:');
            if (reason !== null && reason.trim() !== '') {
                const leave = teamLeaves.find(l => l.id === id);
                if (leave) {
                    leave.status = 'rejected';
                    leave.rejectionReason = reason;
                    leave.processedBy = 'John Doe';
                    leave.processedOn = new Date().toISOString().split('T')[0];
                    
                    // Update the corresponding leave in leaveHistory if it's the manager's own leave
                    const userLeave = leaveHistory.find(l => 
                        l.startDate === leave.startDate && 
                        l.endDate === leave.endDate &&
                        l.type === leave.type
                    );
                    
                    if (userLeave) {
                        userLeave.status = 'rejected';
                        userLeave.rejectionReason = reason;
                        userLeave.processedBy = 'John Doe';
                        userLeave.processedOn = new Date().toISOString().split('T')[0];
                    }
                    
                    populateTeamLeaves();
                    closeModal();
                    showSuccessAlert('Leave rejected successfully!');
                }
            }
        }

        // Modal functions
        function openModal() {
            leaveDetailsModal.classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            leaveDetailsModal.classList.remove('show');
            document.body.style.overflow = 'auto';
            
            // Reset modal content after closing
            setTimeout(() => {
                leaveDetailsContent.innerHTML = '';
            }, 300);
        }

        // Logout function
        function logout() {
            // In a real application, this would clear the session
            showSuccessAlert('You have been logged out successfully!');
            // Redirect to login page
            // window.location.href = 'login.html';
        }

        // Helper functions
        function formatDate(dateString) {
            if (!dateString) return 'N/A';
            
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('en-US', options);
        }

        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }

        function getStatusBadgeClass(status) {
            switch (status) {
                case 'approved': return 'badge-success';
                case 'pending': return 'badge-warning';
                case 'rejected': return 'badge-danger';
                default: return 'badge-light';
            }
        }

        function showSuccessAlert(message) {
            // In a real app, you might use a more sophisticated alert/notification system
            alert(message);
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target === leaveDetailsModal) {
                closeModal();
            }
        }
    </script>
</body>
</html>